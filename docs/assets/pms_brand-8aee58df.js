import{_ as N,E as s,r as V,o as f,c as A,a as t,V as L,w as n,g as I,e as y,b as w,O as q}from"./index-cb4e48ca.js";import{E as F}from"./el-overlay-1d94b4c5.js";import{a as K,b as M,E as j}from"./el-form-item-f6b9e70c.js";import{E as O}from"./el-pagination-8d11a77d.js";import{a as g,E as R,b as G}from"./index-d20eb06a.js";import{E as H}from"./index-b083c78e.js";import{E as D}from"./index-3ec6997f.js";import{E as J}from"./index-c18ef027.js";import"./index-ee84b82c.js";let E;const b=()=>{E=H.service({lock:!0,text:"加载中...",spinner:"wave"})},h=()=>{E&&E.close()},Q=async l=>{b();try{return await g.request({url:"/mall/pms-brand/one/"+l,method:"get"})}catch(e){throw e}finally{h()}},W=async l=>{b();try{return await g.request({url:"/mall/pms-brand/del/"+l,method:"get"})}catch(e){throw e}finally{h()}},X=async l=>{b();try{return await g.request({url:"/mall/pms-brand/edit",method:"post",data:l})}catch(e){throw e}finally{h()}},Y=async l=>{b();try{return await g.request({url:"/mall/pms-brand/add",method:"post",data:l})}catch(e){throw e}finally{h()}},Z=async l=>{b();try{return await g.request({url:"/mall/pms-brand/page",method:"post",data:l})}catch(e){throw e}finally{h()}},C={One:Q,Del:W,Edit:X,Add:Y,Page:Z};const $={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const l=(this.currentPage-1)*this.pageSize,e=l+this.pageSize;return this.filteredtableData.slice(l,e)},filteredtableData(){return this.searchText?this.tableData.filter(l=>String(l.id).includes(String(this.searchText))):this.tableData}},methods:{openEditDialog(l){this.editItem={...l},this.editDialogVisible=!0},handlePageChange(l){this.currentPage=l},saveEdit(){console.log(this.editItem),D.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=this.tableData.findIndex(e=>e.id===this.editItem.id);l!==-1?this.tableData.splice(l,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,s.success("修改成功！"),this.editItem={}}).catch(()=>{s.info("修改取消！")})},fetchData(){C.Page(this.json).then(l=>{this.tableData=l.data.data.page.records||l.data.records,console.log(l),s.success("刷新成功！")}).catch(l=>{s.error("刷新失败，请检查网络！"),console.error("Error fetching data:",l)})},Insert(l){C.Add(l).then(e=>{delete l.isNew,s.success("插入数据成功！")}).catch(e=>{s.error("插入数据失败！"),console.error("保存修改失败:",e)})},Alter(l){C.Edit(l).then(e=>{console.log("修改保存成功:",e.data),s.success("修改数据成功！")}).catch(e=>{s.error("修改数据失败！"),console.error("保存修改失败:",e)})},Del(l){D.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{C.Del(l.id).then(e=>{const p=this.tableData.findIndex(x=>x.id===l.id);p!==-1&&this.tableData.splice(p,1),console.log("删除成功:",e.data),s.success("删除成功！")}).catch(e=>{s.error(response.msg),console.error("删除失败:",e)})}).catch(()=>{})},delND(l){D.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.tableData.findIndex(p=>p.id===l.id);e!==-1&&this.tableData.splice(e,1),s.success("删除成功！")}).catch(()=>{s.error("删除失败！"),console.log("取消删除 API",l)})},addAPI(){s.success("添加数据ing");const l={attributeCount:0,id:0,name:"",paramCount:0,isNew:!0};this.tableData.push(l);const e=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(e)}},created(){this.fetchData()}},ee={class:"root"},te=["src"],le=["src"],oe={slot:"footer"};function ne(l,e,p,x,a,u){const i=K,r=G,P=V("Position"),m=q,c=J,S=V("EditPen"),k=V("Delete"),v=R,z=O,d=M,T=j,U=F,B=V("CirclePlusFilled");return f(),A("div",ee,[t(i,{modelValue:a.searchText,"onUpdate:modelValue":e[0]||(e[0]=o=>a.searchText=o),placeholder:"请输入搜索关键字",clearable:"",onClear:l.clearSearch,onKeyup:L(l.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),t(v,{data:u.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:n(()=>[t(r,{prop:"bigPic",label:"专区大图"},{default:n(({row:o})=>[I("img",{src:o.bigPic,width:"200",height:"300"},null,8,te)]),_:1}),t(r,{prop:"brandStory",label:"品牌故事"}),t(r,{prop:"factoryStatus",label:"是否为品牌制造商:0->不是;1->是"}),t(r,{prop:"firstLetter",label:"首字母"}),t(r,{prop:"id",label:"id"}),t(r,{prop:"logo",label:"品牌logo"},{default:n(({row:o})=>[I("img",{src:o.logo,width:"150",height:"120"},null,8,le)]),_:1}),t(r,{prop:"name",label:"name"}),t(r,{prop:"productCommentCount",label:"产品评论数量"}),t(r,{prop:"productCount",label:"产品数量"}),t(r,{prop:"showStatus",label:"showStatus"}),t(r,{prop:"sort",label:"sort"}),t(r,{width:"150rpx",label:"操作"},{default:n(({row:o})=>[o.isNew?(f(),y(c,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:_=>u.Insert(o)},{default:n(()=>[t(m,null,{default:n(()=>[t(P)]),_:1})]),_:2},1032,["onClick"])):(f(),y(c,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:_=>u.Alter(o)},{default:n(()=>[t(m,null,{default:n(()=>[t(P)]),_:1})]),_:2},1032,["onClick"])),t(c,{type:"primary",size:"mini",circle:"",onClick:_=>u.openEditDialog(o)},{default:n(()=>[t(m,null,{default:n(()=>[t(S)]),_:1})]),_:2},1032,["onClick"]),o.isNew?(f(),y(c,{key:2,size:"mini",type:"danger",circle:"",onClick:_=>u.delND(o)},{default:n(()=>[t(m,null,{default:n(()=>[t(k)]),_:1})]),_:2},1032,["onClick"])):(f(),y(c,{key:3,type:"danger",size:"mini",circle:"",onClick:_=>u.Del(o)},{default:n(()=>[t(m,null,{default:n(()=>[t(k)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),t(z,{"current-page":a.currentPage,"page-size":a.pageSize,total:u.filteredtableData.length,onCurrentChange:u.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),t(U,{class:"form",modelValue:a.editDialogVisible,"onUpdate:modelValue":e[13]||(e[13]=o=>a.editDialogVisible=o),onClose:e[14]||(e[14]=o=>a.editDialogVisible=!1)},{default:n(()=>[t(T,null,{default:n(()=>[t(d,{label:"bigPic"},{default:n(()=>[t(i,{modelValue:a.editItem.bigPic,"onUpdate:modelValue":e[1]||(e[1]=o=>a.editItem.bigPic=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"brandStory"},{default:n(()=>[t(i,{modelValue:a.editItem.brandStory,"onUpdate:modelValue":e[2]||(e[2]=o=>a.editItem.brandStory=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"factoryStatus"},{default:n(()=>[t(i,{modelValue:a.editItem.factoryStatus,"onUpdate:modelValue":e[3]||(e[3]=o=>a.editItem.factoryStatus=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"firstLetter"},{default:n(()=>[t(i,{modelValue:a.editItem.firstLetter,"onUpdate:modelValue":e[4]||(e[4]=o=>a.editItem.firstLetter=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"id"},{default:n(()=>[t(i,{modelValue:a.editItem.id,"onUpdate:modelValue":e[5]||(e[5]=o=>a.editItem.id=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"logo"},{default:n(()=>[t(i,{modelValue:a.editItem.logo,"onUpdate:modelValue":e[6]||(e[6]=o=>a.editItem.logo=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"name"},{default:n(()=>[t(i,{modelValue:a.editItem.name,"onUpdate:modelValue":e[7]||(e[7]=o=>a.editItem.name=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"productCommentCount"},{default:n(()=>[t(i,{modelValue:a.editItem.productCommentCount,"onUpdate:modelValue":e[8]||(e[8]=o=>a.editItem.productCommentCount=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"productCount"},{default:n(()=>[t(i,{modelValue:a.editItem.productCount,"onUpdate:modelValue":e[9]||(e[9]=o=>a.editItem.productCount=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"showStatus"},{default:n(()=>[t(i,{modelValue:a.editItem.showStatus,"onUpdate:modelValue":e[10]||(e[10]=o=>a.editItem.showStatus=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"sort"},{default:n(()=>[t(i,{modelValue:a.editItem.sort,"onUpdate:modelValue":e[11]||(e[11]=o=>a.editItem.sort=o)},null,8,["modelValue"])]),_:1})]),_:1}),I("div",oe,[t(c,{onClick:e[12]||(e[12]=o=>a.editDialogVisible=!1)},{default:n(()=>[w("取消")]),_:1}),t(c,{type:"primary",onClick:u.saveEdit},{default:n(()=>[w("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),t(c,{type:"primary",circle:"",size:"large",onClick:u.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:n(()=>[t(m,null,{default:n(()=>[t(B)]),_:1})]),_:1},8,["onClick"])])}const fe=N($,[["render",ne]]);export{fe as default};
