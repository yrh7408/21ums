import{j as D,z as I,d as E,k as T,o as R,c as y,M as C,N as h,p as V,f as U,g as u,Q as A,U as F,b as i,t as k,G as N,_ as M,E as g,a as t,w as n,F as P}from"./index-cb4e48ca.js";import{E as q}from"./el-overlay-1d94b4c5.js";import{a as O,b as j,E as G}from"./el-form-item-f6b9e70c.js";import{E as H}from"./el-pagination-8d11a77d.js";import{a as _,E as Q,b as Y}from"./index-d20eb06a.js";import{E as J}from"./el-switch-483ed374.js";import{E as K}from"./index-3ec6997f.js";import{E as W}from"./index-c18ef027.js";import"./index-ee84b82c.js";const X=D({header:{type:String,default:""},bodyStyle:{type:I([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),Z=E({name:"ElCard"}),$=E({...Z,props:X,setup(e){const a=T("card");return(l,d)=>(R(),y("div",{class:C([h(a).b(),h(a).is(`${l.shadow}-shadow`)])},[l.$slots.header||l.header?(R(),y("div",{key:0,class:C(h(a).e("header"))},[V(l.$slots,"header",{},()=>[i(k(l.header),1)])],2)):U("v-if",!0),u("div",{class:C(h(a).e("body")),style:A(l.bodyStyle)},[V(l.$slots,"default")],6)],2))}});var ee=F($,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const te=N(ee);const f={getReasonList(e){return _.request({url:"mall/oms-order-return-reason/page",method:"post",data:e})},addReason(e){return _.request({url:"mall/oms-order-return-reason/add",method:"post",data:e})},updateReason(e){return _.request({url:"mall/oms-order-return-reason/edit",method:"post",data:e})},deleteReason(e){return _.request({url:`/mall/oms-order-return-reason/del/${e}`,method:"get"})}},ae={sort:{0:"拒绝退款",1:"同意退款"}};const se={data(){return{returnReason:{name:"",sort:"",status:"",createTime:""},total:0,operateReasonId:null,listArg:{current:0,size:5},dialogVisible:!1,listLoading:!0,list:[],findname:"",enumn:ae,searchText:"",currentPage:1,pageSize:5,tableData:[]}},created(){this.getList()},methods:{change(e){},formatDate(e,a){let l=e[a.property];if(l==null)return null;let d=new Date(l);return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()},getList(){f.getReasonList(this.listArg).then(e=>{this.list=e.data.data.page.records,this.total=e.data.data.page.total})},updateButton(e){this.dialogVisible=!0,this.operateReasonId=e.id,this.returnReason.id=e.id,this.returnReason.name=e.name,this.returnReason.sort=e.sort,this.returnReason.status=e.status},diagCancel(){this.dialogVisible=!1,this.initreason()},initreason(){this.returnReason.name="",this.returnReason.status="",this.returnReason.sort=""},addOrUpdate(){this.operateReasonId==null?f.addReason(this.returnReason).then(e=>{this.dialogVisible=!1,this.operateReasonId=null,g({message:"添加成功！",type:"success"}),this.getList()}):(this.returnReason.id=this.operateReasonId,f.updateReason(this.returnReason).then(e=>{this.dialogVisible=!1,this.operateReasonId=null,g({message:"编辑成功！",type:"success"}),this.returnReason.id=null,this.getList()}))},deleteData(e){K.confirm("该操作将会永久删除该行数据，是否继续?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{f.deleteReason(e.id).then(a=>{a.code==1&&(g({type:"success",message:"删除成功！"}),this.getList())})}).catch(()=>{g({type:"info",message:"删除失败！"})})},handleSizeChange(e){this.listArg.current=1,this.listArg.size=e,this.getList()},handleCurrentChange(e){this.listArg.current=e,this.getList()}}},ne={class:"app-container"},oe=u("i",{class:"el-icon-tickets"},null,-1),le=u("span",null,"数据列表",-1),re={class:"table-container"},ie={class:"pagination-container"},de={slot:"footer",class:"dialog-footer"};function ue(e,a,l,d,o,r){const c=W,z=te,m=Y,v=J,S=Q,x=H,w=O,b=j,L=G,B=q;return R(),y(P,null,[i("  "),u("div",ne,[t(z,{class:"operate-container",shadow:"never"},{default:n(()=>[oe,le,t(c,{size:"mini",style:{float:"right"},onClick:a[0]||(a[0]=s=>o.dialogVisible=!0),class:"btn-add"},{default:n(()=>[i("添加 ")]),_:1})]),_:1}),u("div",re,[t(S,{data:o.list,border:""},{default:n(()=>[t(m,{fixed:"",align:"center",prop:"id",label:"编号",width:"180"}),t(m,{prop:"name",align:"center",label:"原因类型",width:"230"}),t(m,{prop:"sort",label:"排序",align:"center",width:"150"},{default:n(s=>[i(k(o.enumn.sort[s.row.sort]),1)]),_:1}),t(m,{label:"是否可用",align:"center",prop:"status",width:"220"},{default:n(s=>[t(v,{modelValue:s.row.status,"onUpdate:modelValue":p=>s.row.status=p,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-value":1,"inactive-value":0,onChange:p=>r.change(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(m,{prop:"createTime",label:"添加时间",align:"center",width:"190",formatter:r.formatDate},null,8,["formatter"]),t(m,{fixed:"right",label:"操作",align:"center",width:"190"},{default:n(s=>[t(c,{type:"text",size:"small",onClick:p=>r.deleteData(s.row)},{default:n(()=>[i("删除")]),_:2},1032,["onClick"]),t(c,{type:"text",size:"small",onClick:p=>r.updateButton(s.row)},{default:n(()=>[i("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",ie,[t(x,{background:"",onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange,"page-size":o.listArg.size,layout:"prev, pager, next",total:o.total},null,8,["onSizeChange","onCurrentChange","page-size","total"])]),t(B,{title:"添加退货原因",modelValue:o.dialogVisible,"onUpdate:modelValue":a[5]||(a[5]=s=>o.dialogVisible=s),width:"30%"},{default:n(()=>[t(L,{model:o.returnReason,ref:"reasonForm","label-width":"150px"},{default:n(()=>[t(b,{label:"原因类型："},{default:n(()=>[t(w,{modelValue:o.returnReason.name,"onUpdate:modelValue":a[1]||(a[1]=s=>o.returnReason.name=s),class:"input-width"},null,8,["modelValue"])]),_:1}),t(b,{label:"排序："},{default:n(()=>[t(w,{modelValue:o.returnReason.sort,"onUpdate:modelValue":a[2]||(a[2]=s=>o.returnReason.sort=s),class:"input-width"},null,8,["modelValue"])]),_:1}),t(b,{label:"是否启用："},{default:n(()=>[t(v,{modelValue:o.returnReason.status,"onUpdate:modelValue":a[3]||(a[3]=s=>o.returnReason.status=s),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),u("span",de,[t(c,{onClick:a[4]||(a[4]=s=>r.diagCancel())},{default:n(()=>[i("取 消")]),_:1}),t(c,{type:"primary",onClick:r.addOrUpdate},{default:n(()=>[i("确 定")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])])],64)}const Re=M(se,[["render",ue]]);export{Re as default};
