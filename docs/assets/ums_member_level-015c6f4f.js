import{_ as T,E as m,r as v,o as a,c as d,a as e,V as U,w as l,e as I,b as s,g as N,O as M}from"./index-cb4e48ca.js";import{E as A}from"./el-overlay-1d94b4c5.js";import{a as G,b as K,E as R}from"./el-form-item-f6b9e70c.js";import{E as j,a as O}from"./el-radio-2b5207a0.js";import{E as q}from"./el-input-number-1349538c.js";import{E as H}from"./el-pagination-8d11a77d.js";import{E as J,b as L}from"./index-d20eb06a.js";import{a as y}from"./ums_member_level-868d3fa7.js";import{E as P}from"./index-3ec6997f.js";import{E as Q}from"./index-c18ef027.js";import"./index-ee84b82c.js";import"./index-b083c78e.js";const W={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const o=(this.currentPage-1)*this.pageSize,i=o+this.pageSize;return this.filteredtableData.slice(o,i)},filteredtableData(){return this.searchText&&this.tableData&&this.tableData.length>0?this.tableData.filter(o=>String(o.name).includes(String(this.searchText))):this.tableData||[]}},methods:{openEditDialog(o){this.editItem={...o},this.editDialogVisible=!0},handlePageChange(o){this.currentPage=o},saveEdit(){console.log(this.editItem),P.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const o=this.tableData.findIndex(i=>i.id===this.editItem.id);o!==-1?this.tableData.splice(o,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,m.success("修改成功！"),this.editItem={}}).catch(()=>{m.info("修改取消！")})},fetchData(){y.Page(this.json).then(o=>{this.tableData=o.data.data.page.records||o.data.records,console.log(this.tableData),m.success("刷新成功！")}).catch(o=>{m.error("刷新失败，请检查网络！"),console.error("Error fetching data:",o)})},Insert(o){y.Add(o).then(i=>{delete o.isNew,m.success("插入数据成功！")}).catch(i=>{m.error("插入数据失败！"),console.error("保存修改失败:",i)})},Alter(o){y.Edit(o).then(i=>{console.log("修改保存成功:",i.data),m.success("修改数据成功！")}).catch(i=>{m.error("修改数据失败！"),console.error("保存修改失败:",i)})},Del(o){P.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.Del(o.id).then(i=>{const h=this.tableData.findIndex(k=>k.id===o.id);h!==-1&&this.tableData.splice(h,1),console.log("删除成功:",i.data),m.success("删除成功！")}).catch(i=>{m.error(response.msg),console.error("删除失败:",i)})}).catch(()=>{})},delND(o){P.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const i=this.tableData.findIndex(h=>h.id===o.id);i!==-1&&this.tableData.splice(i,1),m.success("删除成功！")}).catch(()=>{m.error("删除失败！"),console.log("取消删除 API",o)})},addAPI(){m.success("添加数据ing");const o={commentGrowthPoint:0,defaultStatus:0,freeFreightPoint:0,growthPoint:0,id:0,name:"",note:"",priviledgeBirthday:0,priviledgeComment:0,priviledgeFreeFreight:0,priviledgeMemberPrice:0,priviledgePromotion:0,priviledgeSignIn:0,isNew:!0};this.tableData.push(o);const i=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(i)}},created(){this.fetchData()}},X={class:"root"},Y={key:0},Z={key:1},$={key:2},ee={key:0},te={key:1},le={key:2},ie={key:0},oe={key:1},ne={key:2},ae={key:0},de={key:1},re={key:2},se={key:0},me={key:1},ue={key:2},pe={key:0},ce={key:1},_e={key:2},ge={slot:"footer"};function fe(o,i,h,k,n,c){const b=G,r=L,D=v("Position"),g=M,_=Q,E=v("EditPen"),x=v("Delete"),F=J,S=H,u=K,C=q,p=j,f=O,B=R,w=A,z=v("CirclePlusFilled");return a(),d("div",X,[e(b,{modelValue:n.searchText,"onUpdate:modelValue":i[0]||(i[0]=t=>n.searchText=t),placeholder:"请输入搜索关键字",clearable:"",onClear:o.clearSearch,onKeyup:U(o.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),e(F,{data:c.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:l(()=>[e(r,{width:"60rpx",prop:"id",label:"id"}),e(r,{width:"100rpx",prop:"name",label:"会员名"}),e(r,{width:"100rpx",prop:"growthPoint",label:"成长点"}),e(r,{width:"100rpx",prop:"defaultStatus",label:"默认等级"}),e(r,{width:"100rpx",prop:"freeFreightPoint",label:"免运费标准"}),e(r,{width:"100rpx",prop:"commentGrowthPoint",label:"评价成长值"}),e(r,{width:"100rpx",prop:"priviledgeFreeFreight",label:"免邮特权"},{default:l(({row:t})=>[t.priviledgeFreeFreight==0?(a(),d("span",Y,"否")):t.priviledgeFreeFreight==null?(a(),d("span",Z)):(a(),d("span",$,"是"))]),_:1}),e(r,{width:"100rpx",prop:"priviledgeSignIn",label:"签到特权"},{default:l(({row:t})=>[t.priviledgeSignIn==0?(a(),d("span",ee,"否")):t.priviledgeSignIn==null?(a(),d("span",te)):(a(),d("span",le,"是"))]),_:1}),e(r,{prop:"priviledgeComment",label:"评论奖励特权"},{default:l(({row:t})=>[t.priviledgeComment==0?(a(),d("span",ie,"否")):t.priviledgeComment==null?(a(),d("span",oe)):(a(),d("span",ne,"是"))]),_:1}),e(r,{prop:"priviledgePromotion",label:"专项活动特权"},{default:l(({row:t})=>[t.priviledgePromotion==0?(a(),d("span",ae,"否")):t.priviledgePromotion==null?(a(),d("span",de)):(a(),d("span",re,"是"))]),_:1}),e(r,{prop:"priviledgeMemberPrice",label:"会员价格特权"},{default:l(({row:t})=>[t.priviledgeMemberPrice==0?(a(),d("span",se,"否")):t.priviledgeMemberPrice==null?(a(),d("span",me)):(a(),d("span",ue,"是"))]),_:1}),e(r,{width:"100rpx",prop:"priviledgeBirthday",label:"生日特权"},{default:l(({row:t})=>[t.priviledgeBirthday==0?(a(),d("span",pe,"否")):t.priviledgeBirthday==null?(a(),d("span",ce)):(a(),d("span",_e,"是"))]),_:1}),e(r,{width:"100rpx",prop:"note",label:"备注"}),e(r,{width:"150rpx",label:"操作"},{default:l(({row:t})=>[t.isNew?(a(),I(_,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:V=>c.Insert(t)},{default:l(()=>[e(g,null,{default:l(()=>[e(D)]),_:1})]),_:2},1032,["onClick"])):(a(),I(_,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:V=>c.Alter(t)},{default:l(()=>[e(g,null,{default:l(()=>[e(D)]),_:1})]),_:2},1032,["onClick"])),e(_,{type:"primary",size:"mini",circle:"",onClick:V=>c.openEditDialog(t)},{default:l(()=>[e(g,null,{default:l(()=>[e(E)]),_:1})]),_:2},1032,["onClick"]),t.isNew?(a(),I(_,{key:2,size:"mini",type:"danger",circle:"",onClick:V=>c.delND(t)},{default:l(()=>[e(g,null,{default:l(()=>[e(x)]),_:1})]),_:2},1032,["onClick"])):(a(),I(_,{key:3,type:"danger",size:"mini",circle:"",onClick:V=>c.Del(t)},{default:l(()=>[e(g,null,{default:l(()=>[e(x)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),e(S,{"current-page":n.currentPage,"page-size":n.pageSize,total:c.filteredtableData.length,onCurrentChange:c.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),e(w,{class:"form",modelValue:n.editDialogVisible,"onUpdate:modelValue":i[14]||(i[14]=t=>n.editDialogVisible=t),center:"",onClose:i[15]||(i[15]=t=>n.editDialogVisible=!1)},{default:l(()=>[e(B,null,{default:l(()=>[e(u,{label:"会员名"},{default:l(()=>[e(b,{modelValue:n.editItem.name,"onUpdate:modelValue":i[1]||(i[1]=t=>n.editItem.name=t)},null,8,["modelValue"])]),_:1}),e(u,{label:"成长点"},{default:l(()=>[e(b,{modelValue:n.editItem.growthPoint,"onUpdate:modelValue":i[2]||(i[2]=t=>n.editItem.growthPoint=t)},null,8,["modelValue"])]),_:1}),e(u,{label:"默认等级"},{default:l(()=>[e(C,{modelValue:n.editItem.defaultStatus,"onUpdate:modelValue":i[3]||(i[3]=t=>n.editItem.defaultStatus=t)},null,8,["modelValue"])]),_:1}),e(u,{label:"免运费标准"},{default:l(()=>[e(C,{modelValue:n.editItem.freeFreightPoint,"onUpdate:modelValue":i[4]||(i[4]=t=>n.editItem.freeFreightPoint=t)},null,8,["modelValue"])]),_:1}),e(u,{label:"评价成长值"},{default:l(()=>[e(b,{modelValue:n.editItem.commentGrowthPoint,"onUpdate:modelValue":i[5]||(i[5]=t=>n.editItem.commentGrowthPoint=t)},null,8,["modelValue"])]),_:1}),e(u,{label:"免邮特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgeFreeFreight,"onUpdate:modelValue":i[6]||(i[6]=t=>n.editItem.priviledgeFreeFreight=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"签到特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgeSignIn,"onUpdate:modelValue":i[7]||(i[7]=t=>n.editItem.priviledgeSignIn=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"评论奖励特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgeComment,"onUpdate:modelValue":i[8]||(i[8]=t=>n.editItem.priviledgeComment=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"专项活动特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgePromotion,"onUpdate:modelValue":i[9]||(i[9]=t=>n.editItem.priviledgePromotion=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"会员价格特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgeMemberPrice,"onUpdate:modelValue":i[10]||(i[10]=t=>n.editItem.priviledgeMemberPrice=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"生日特权"},{default:l(()=>[e(f,{modelValue:n.editItem.priviledgeBirthday,"onUpdate:modelValue":i[11]||(i[11]=t=>n.editItem.priviledgeBirthday=t)},{default:l(()=>[e(p,{label:1},{default:l(()=>[s("是")]),_:1}),e(p,{label:0},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"备注"},{default:l(()=>[e(b,{modelValue:n.editItem.note,"onUpdate:modelValue":i[12]||(i[12]=t=>n.editItem.note=t)},null,8,["modelValue"])]),_:1})]),_:1}),N("div",ge,[e(_,{onClick:i[13]||(i[13]=t=>n.editDialogVisible=!1)},{default:l(()=>[s("取消")]),_:1}),e(_,{type:"primary",onClick:c.saveEdit},{default:l(()=>[s("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),e(_,{type:"primary",circle:"",size:"large",onClick:c.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:l(()=>[e(g,null,{default:l(()=>[e(z)]),_:1})]),_:1},8,["onClick"])])}const Fe=T(W,[["render",fe]]);export{Fe as default};
