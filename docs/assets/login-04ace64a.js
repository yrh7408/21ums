import{i as g,_ as F,d as _,u as m,m as b,o as h,c as k,a as o,w as s,b as i,t as E,F as w}from"./index-cb4e48ca.js";import{E as V,a as $,b as C}from"./el-form-item-f6b9e70c.js";import{E as S}from"./index-c18ef027.js";const q=e=>g.request({url:"api/mobile/elogin",method:"post",data:e,headers:{}}),y=_({setup(){},data(){return{userForm:{email:"414090297@qq.com",password:"12345678",rou:""},rules:{email:[{required:!0,message:"请输入正确的电子邮箱",tirgger:"blur"},{type:"email",message:"电子邮箱格式错误",tirgger:"blur"}],password:[{required:!0,message:"请输入正确的用户密码",tirgger:"blur"},{min:8,message:"密码长度不得小于8",tirgger:"blur"}]}}},methods:{getToken(){return m().getToken},...b(m,["setToken","fillUserinfo"]),btnLogin(){const e=this,r=e.$refs.ruleFormRef;r&&r.validate(f=>{if(f)q(this.userForm).then(t=>{if(t.success){const n=t.data.userinfo,l=m();console.log(e),e.setToken(n.token),e.fillUserinfo(n),this.rou=l.token,this.$router.push("/us_index"),localStorage.setItem("status",!0)}}).catch(t=>{console.log(t)});else return console.log(" error.submit"),!1})},resetForm(){this.$refs.ruleFormRef.resetFields()}}});function T(e,r,f,p,t,n){const l=$,a=C,d=S,c=V;return h(),k(w,null,[o(c,{ref:"ruleFormRef",model:e.userForm,"status-icon":"",rules:e.rules,class:"demo-ruleForm"},{default:s(()=>[o(a,{label:"用户邮箱",prop:"email"},{default:s(()=>[o(l,{modelValue:e.userForm.email,"onUpdate:modelValue":r[0]||(r[0]=u=>e.userForm.email=u),autocomplete:"off",placeholder:"请输入你的邮箱","suffix-icon":"Message"},null,8,["modelValue"])]),_:1}),o(a,{label:"用户密码",prop:"password"},{default:s(()=>[o(l,{type:"password",modelValue:e.userForm.password,"onUpdate:modelValue":r[1]||(r[1]=u=>e.userForm.password=u),autocomplete:"off",placeholder:"请输入你的密码","suffix-icon":"Lock"},null,8,["modelValue"])]),_:1}),o(a,null,{default:s(()=>[o(d,{type:"primary",onClick:e.btnLogin},{default:s(()=>[i("用户登录")]),_:1},8,["onClick"]),o(d,{onClick:e.resetForm},{default:s(()=>[i("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"]),i(" "+E(this.rou),1)],64)}const I=F(y,[["render",T]]);export{I as default};
