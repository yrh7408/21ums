import{_ as S,E as i,r as V,o as c,c as D,a as t,V as A,w as n,e as y,g as q,b as w,O as F}from"./index-cb4e48ca.js";import{E as K}from"./el-overlay-1d94b4c5.js";import{a as L,b as M,E as j}from"./el-form-item-f6b9e70c.js";import{E as O}from"./el-pagination-8d11a77d.js";import{a as f,E as R,b as G}from"./index-d20eb06a.js";import{E as H}from"./index-b083c78e.js";import{_ as J}from"./1-361bf820.js";import{E as k}from"./index-3ec6997f.js";import{E as Q}from"./index-c18ef027.js";import"./index-ee84b82c.js";let C;const h=()=>{C=H.service({lock:!0,text:"加载中...",spinner:"wave"})},_=()=>{C&&C.close()},W=async l=>{h();try{return await f.request({url:"/mall/ums-admin/one/"+l,method:"get"})}catch(e){throw e}finally{_()}},X=async l=>{h();try{return await f.request({url:"/mall/ums-admin/del/"+l,method:"get"})}catch(e){throw e}finally{_()}},Y=async l=>{h();try{return await f.request({url:"/mall/ums-admin/edit",method:"post",data:l})}catch(e){throw e}finally{_()}},Z=async l=>{h();try{return await f.request({url:"/mall/ums-admin/add",method:"post",data:l})}catch(e){throw e}finally{_()}},$=async l=>{h();try{return await f.request({url:"/mall/ums-admin/page",method:"post",data:l})}catch(e){throw e}finally{_()}},I={One:W,Del:X,Edit:Y,Add:Z,Page:$};const ee={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const l=(this.currentPage-1)*this.pageSize,e=l+this.pageSize;return this.filteredtableData.slice(l,e)},filteredtableData(){return this.searchText?this.tableData.filter(l=>String(l.id).includes(String(this.searchText))):this.tableData}},methods:{openEditDialog(l){this.editItem={...l},this.editDialogVisible=!0},handlePageChange(l){this.currentPage=l},saveEdit(){console.log(this.editItem),k.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=this.tableData.findIndex(e=>e.id===this.editItem.id);l!==-1?this.tableData.splice(l,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,i.success("修改成功！"),this.editItem={}}).catch(()=>{i.info("修改取消！")})},fetchData(){I.Page(this.json).then(l=>{this.tableData=l.data.data.page.records||l.data.records,console.log(l),i.success("刷新成功！")}).catch(l=>{i.error("刷新失败，请检查网络！"),console.error("Error fetching data:",l)})},Insert(l){I.Add(l).then(e=>{delete l.isNew,i.success("插入数据成功！")}).catch(e=>{i.error("插入数据失败！"),console.error("保存修改失败:",e)})},Alter(l){I.Edit(l).then(e=>{console.log("修改保存成功:",e.data),i.success("修改数据成功！")}).catch(e=>{i.error("修改数据失败！"),console.error("保存修改失败:",e)})},Del(l){k.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.Del(l.id).then(e=>{const g=this.tableData.findIndex(E=>E.id===l.id);g!==-1&&this.tableData.splice(g,1),console.log("删除成功:",e.data),i.success("删除成功！")}).catch(e=>{i.error(response.msg),console.error("删除失败:",e)})}).catch(()=>{})},delND(l){k.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.tableData.findIndex(g=>g.id===l.id);e!==-1&&this.tableData.splice(e,1),i.success("删除成功！")}).catch(()=>{i.error("删除失败！"),console.log("取消删除 API",l)})},addAPI(){i.success("添加数据ing");const l={createTime:"",email:"",icon:"",id:0,loginTime:"",nickName:"",note:"",password:"",status:0,username:"",isNew:!0};this.tableData.push(l);const e=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(e)}},created(){this.fetchData()}},te={class:"root"},le=["src"],ae={key:1,src:J,alt:"图标",width:"30",height:"30"},ne={slot:"footer"};function oe(l,e,g,E,o,d){const s=L,r=G,x=V("Position"),p=F,u=Q,P=V("EditPen"),T=V("Delete"),N=R,v=O,m=M,z=j,B=K,U=V("CirclePlusFilled");return c(),D("div",te,[t(s,{modelValue:o.searchText,"onUpdate:modelValue":e[0]||(e[0]=a=>o.searchText=a),placeholder:"请输入搜索关键字",clearable:"",onClear:l.clearSearch,onKeyup:A(l.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),t(N,{data:d.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:n(()=>[t(r,{prop:"id",label:"id"}),t(r,{prop:"createTime",label:"createTime"}),t(r,{prop:"email",label:"email"}),t(r,{prop:"icon",label:"icon"},{default:n(({row:a})=>[isNaN(Number(a.icon,10))?(c(),D("img",{key:0,src:a.icon,alt:"图标",width:"30",height:"30"},null,8,le)):(c(),D("img",ae))]),_:1}),t(r,{prop:"loginTime",label:"loginTime"}),t(r,{prop:"nickName",label:"nickName"}),t(r,{prop:"note",label:"note"}),t(r,{prop:"password",label:"password"}),t(r,{prop:"status",label:"status"}),t(r,{prop:"username",label:"username"}),t(r,{width:"150rpx",label:"操作"},{default:n(({row:a})=>[a.isNew?(c(),y(u,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:b=>d.Insert(a)},{default:n(()=>[t(p,null,{default:n(()=>[t(x)]),_:1})]),_:2},1032,["onClick"])):(c(),y(u,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:b=>d.Alter(a)},{default:n(()=>[t(p,null,{default:n(()=>[t(x)]),_:1})]),_:2},1032,["onClick"])),t(u,{type:"primary",size:"mini",circle:"",onClick:b=>d.openEditDialog(a)},{default:n(()=>[t(p,null,{default:n(()=>[t(P)]),_:1})]),_:2},1032,["onClick"]),a.isNew?(c(),y(u,{key:2,size:"mini",type:"danger",circle:"",onClick:b=>d.delND(a)},{default:n(()=>[t(p,null,{default:n(()=>[t(T)]),_:1})]),_:2},1032,["onClick"])):(c(),y(u,{key:3,type:"danger",size:"mini",circle:"",onClick:b=>d.Del(a)},{default:n(()=>[t(p,null,{default:n(()=>[t(T)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),t(v,{"current-page":o.currentPage,"page-size":o.pageSize,total:d.filteredtableData.length,onCurrentChange:d.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),t(B,{class:"form",modelValue:o.editDialogVisible,"onUpdate:modelValue":e[12]||(e[12]=a=>o.editDialogVisible=a),onClose:e[13]||(e[13]=a=>o.editDialogVisible=!1)},{default:n(()=>[t(z,null,{default:n(()=>[t(m,{label:"id",disabled:""},{default:n(()=>[t(s,{modelValue:o.editItem.id,"onUpdate:modelValue":e[1]||(e[1]=a=>o.editItem.id=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"createTime"},{default:n(()=>[t(s,{modelValue:o.editItem.createTime,"onUpdate:modelValue":e[2]||(e[2]=a=>o.editItem.createTime=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"email"},{default:n(()=>[t(s,{modelValue:o.editItem.email,"onUpdate:modelValue":e[3]||(e[3]=a=>o.editItem.email=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"icon"},{default:n(()=>[t(s,{modelValue:o.editItem.icon,"onUpdate:modelValue":e[4]||(e[4]=a=>o.editItem.icon=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"loginTime"},{default:n(()=>[t(s,{modelValue:o.editItem.loginTime,"onUpdate:modelValue":e[5]||(e[5]=a=>o.editItem.loginTime=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"nickName"},{default:n(()=>[t(s,{modelValue:o.editItem.nickName,"onUpdate:modelValue":e[6]||(e[6]=a=>o.editItem.nickName=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"note"},{default:n(()=>[t(s,{modelValue:o.editItem.note,"onUpdate:modelValue":e[7]||(e[7]=a=>o.editItem.note=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"password"},{default:n(()=>[t(s,{modelValue:o.editItem.password,"onUpdate:modelValue":e[8]||(e[8]=a=>o.editItem.password=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"status"},{default:n(()=>[t(s,{modelValue:o.editItem.status,"onUpdate:modelValue":e[9]||(e[9]=a=>o.editItem.status=a)},null,8,["modelValue"])]),_:1}),t(m,{label:"username"},{default:n(()=>[t(s,{modelValue:o.editItem.username,"onUpdate:modelValue":e[10]||(e[10]=a=>o.editItem.username=a)},null,8,["modelValue"])]),_:1})]),_:1}),q("div",ne,[t(u,{onClick:e[11]||(e[11]=a=>o.editDialogVisible=!1)},{default:n(()=>[w("取消")]),_:1}),t(u,{type:"primary",onClick:d.saveEdit},{default:n(()=>[w("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),t(u,{type:"primary",circle:"",size:"large",onClick:d.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:n(()=>[t(p,null,{default:n(()=>[t(U)]),_:1})]),_:1},8,["onClick"])])}const he=S(ee,[["render",oe]]);export{he as default};
